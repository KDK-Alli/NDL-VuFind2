<?php //Don't add START and END comments ?>
<div class="truncate-field">
  <?php if ($data): ?>
    <?php foreach ($data as $i => $hostRecord): ?>
      <?=$i > 0 ? '<br/>' : ''?>
      <?php if ($hostRecord['id'] || $hostRecord['title']): ?>
        <?php // We should use RecordLink() helper below to create the record URL, but this is much faster. We can get away with it here, but this is not generally acceptable. ?>
        <?php $link = $hostRecord['id'] ? $this->escapeHtmlAttr($this->url('record') . urlencode($hostRecord['id'])) : $this->record($this->driver)->getLink('title', $hostRecord['title']); ?>
        <a href="<?=$link?>"><?=$hostRecord['title']?></a>
      <?php endif; ?>
      <?=$this->escapeHtml($hostRecord['reference']); ?><?php if (!empty($hostRecord['publishingInfo'])): ?>,<?php endif; ?>
      <?=$this->escapeHtml($hostRecord['publishingInfo']); ?>
    <?php endforeach; ?>
  <?php endif; ?>
</div>
