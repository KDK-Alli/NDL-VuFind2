<!-- START of: finna - list/list-notes.phtml -->
<?php if (in_array($this->layout()->templateDir, ['content', 'list', 'search']) && $this->layout()->templateName !== 'results' && is_callable([$this->results, 'getListObject'])):
  $list = $this->results->getListObject();
  $notes = $this->driver->getListNotes($list->id); if (!empty($notes)): ?>
  <?php
    $note = implode('', $notes);
    $note = $this->markdown()->toHtml($note);
    $grid = $this->params->getView() === 'grid'; ?>
    <?= $grid ? '<button class="note-button" aria-hidden="true" data-original-title="' . $this->transEsc('Note') . '" data-placement="left" data-toggle="tooltip" title="' . $this->transEsc('Note') . '"><i class="fa fa-file-text-o"></i></button>' : '' ?>
    <div class="<?= $grid ? 'note-overlay note-hide' : '' ?>">
      <div class="notes">
        <p class="note-heading">
          <span class="heading"><i class="fa fa-file-text-o" aria-hidden="true"></i> <?=$this->transEsc('Note')?>:</span>
        </p>
        <div class="note-rows">
          <?php echo $note; ?>
        </div>
      </div>
    </div>
  <?php endif; ?>
<?php endif; ?>
<!-- END of: finna - list/list-notes.phtml -->
