<!-- START of: finna - Recommend/Ontology.phtml -->
<?php if (!empty($ontologyResults = $this->recommend->getOntologyResults())): ?>
  <?php foreach ($ontologyResults as $type => $typeResults): ?>
    <?php foreach ($typeResults as $term => $termResults): ?>
      <div class="ontology-recommendation ontology-<?= $type ?> alert alert-info">
        <p><?= $this->transEsc(
          'ontology_recommendation_' . $type,
          ['%%term%%' => $term, '%%results_count%%' => count($termResults)]
        ) ?></p>
        <ul<?php if (count($termResults) > 5):?> class="truncate-field" data-rows="1"<?php endif;?>>
          <?php foreach ($termResults as $termResult): ?>
            <li><a href="<?= $termResult['href'] ?>" data-key="<?= $termResult['key'] ?>" data-value="<?= $termResult['value'] ?>"><?= $termResult['label'] ?></a></li>
          <?php endforeach; ?>
        </ul>
      </div>
    <?php endforeach; ?>
  <?php endforeach; ?>
  <?php
    $script = <<<EOT
    $('.ontology-recommendation a').each(function() {
      $(this).click(function() {
        $.cookie($(this).data('key'), $(this).data('value'), {path: VuFind.path});
      });
    });
EOT;
    echo $this->inlineScript(\Laminas\View\Helper\HeadScript::SCRIPT, $script, 'SET');
  ?>
<?php endif; ?>
<!-- END of: finna - Recommend/Ontology.phtml -->
