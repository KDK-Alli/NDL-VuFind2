<!-- START of: finna - Helpers/nkrRestrictedRecordPermission.phtml -->
<?php if (!$this->user): ?>
  <div class="alert alert-info authorization-notification">
    <p><?= $this->translate('nkr_restricted_record_note') ?></p>
    <p><a href="<?=$this->url('myresearch-userlogin')?>" data-lightbox title="<?=$this->transEsc("Login")?>"><i class="fa fa-sign-in"></i> <?=$this->transEsc("Login")?></a></p>
  </div>
<?php else: ?>
  <? if ($this->notSubmitted): ?>
    <?php $this->headScript()->appendFile('finna-nkr.js'); ?>
    <?php
      $setupJS = <<<JS
$(document).ready(function() {
   finna.nkr.initApplyPermission("{$this->id}");
});
JS;
      $this->headScript()->appendScript($setupJS);
    ?>
    <div class="alert alert-info authorization-notification check-permission" data-id="<?=$this->escapeHtmlAttr($this->id)?>">
      <p class="txt"><?= $this->translate('nkr_restricted_record_note') ?></p>
      <p class="register"><a class="btn btn-primary"><?=$this->translate('nkr_register')?></a></p>
    </div>
  <? elseif (!$this->translationEmpty("nkr_permission_request_status_{$status}")): ?>
    <div class="alert alert-info authorization-notification">
      <p class="txt"><?= $this->transEsc("nkr_permission_request_status_{$status}") ?></p>
    </div>
  <? endif; ?>
<? endif; ?>
<!-- END of: finna - Helpers/nkrRestrictedRecordPermission.phtml -->
